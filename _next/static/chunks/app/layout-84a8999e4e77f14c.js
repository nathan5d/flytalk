(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{347:()=>{},1146:(e,t,a)=>{Promise.resolve().then(a.bind(a,3138))},3138:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>f});var r=a(5155),n=a(5648),c=a(884),s=a(7922);a(347);var o=a(2115);function l(){return(0,o.useEffect)(()=>{"serviceWorker"in navigator&&navigator.serviceWorker.register("/flytalk/sw.js").catch(e=>console.error("Erro ao registrar SW ❌",e))},[]),null}let i=(0,o.createContext)(void 0),m=e=>{let{children:t}=e,{flightInfo:a,setFlightInfo:c}=(0,n.S)(),[s,l]=(0,o.useState)(a.originMetar),[m,u]=(0,o.useState)(a.destinationMetar),[p,f]=(0,o.useState)(!1),[h,x]=(0,o.useState)(null),d=(0,o.useCallback)(async e=>{try{let t=await fetch("https://metar.vatsim.net/".concat(e));if(!t.ok){let a=await t.text();throw Error("Erro ao buscar METAR para ".concat(e,": ").concat(t.status," ").concat(t.statusText," - ").concat(a))}return(await t.text()).trim()}catch(t){throw console.error("Erro ao buscar METAR para ".concat(e,":"),t),Error("Falha ao carregar METAR para ".concat(e,": ").concat(t.message))}},[]),j=(0,o.useCallback)(async()=>{f(!0),x(null);let e=s,t=m;try{a.departure&&(e=await d(a.departure),l(e)),a.arrival&&(t=await d(a.arrival),u(t)),c(a=>({...a,...e?{originMetar:e}:{},...t?{destinationMetar:t}:{}}))}catch(e){x(e.message)}finally{f(!1)}},[a.departure,a.arrival,d,c,s,m]);return(0,r.jsx)(i.Provider,{value:{originMetar:s,destinationMetar:m,loadingMetar:p,metarError:h,refreshMetars:j},children:t})};var u=a(841);function p(){let{resolvedTheme:e}=(0,u.D)();return(0,o.useEffect)(()=>{{let t=document.querySelector('meta[name="theme-color"]');t&&("dark"===e?t.setAttribute("content","#18181B"):t.setAttribute("content","#eef2ff"))}},[e]),null}function f(e){let{children:t}=e;return(0,r.jsxs)("html",{lang:"pt",children:[(0,r.jsxs)("head",{children:[(0,r.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover"}),(0,r.jsx)("meta",{name:"format-detection",content:"telephone=no"}),(0,r.jsx)("meta",{name:"msapplication-TileColor",content:"#3B82F6"}),(0,r.jsx)("meta",{name:"msapplication-TileImage",content:"/flytalk/icons/icon-192.png"}),(0,r.jsx)("link",{rel:"manifest",href:"/flytalk/manifest.json"}),(0,r.jsx)("link",{rel:"shortcut icon",href:"/flytalk/icons/favicon.ico",type:"image/x-icon"}),(0,r.jsx)("meta",{name:"theme-color",content:"#eef2ff"}),(0,r.jsx)("meta",{name:"mobile-web-app-capable",content:"yes"}),(0,r.jsx)("meta",{name:"apple-mobile-web-app-capable",content:"yes"}),(0,r.jsx)("meta",{name:"apple-mobile-web-app-status-bar-style",content:"black"}),(0,r.jsx)("link",{rel:"apple-touch-icon",href:"/flytalk/icons/icon-192-maskable.png"}),(0,r.jsx)("link",{rel:"icon",type:"image/png",sizes:"192x192",href:"/flytalk/icons/icon-192-maskable.png"})]}),(0,r.jsx)("body",{children:(0,r.jsxs)(u.N,{children:[(0,r.jsx)(p,{}),(0,r.jsx)(n.a,{children:(0,r.jsx)(c.R,{children:(0,r.jsxs)(s.o,{children:[(0,r.jsx)(m,{children:t}),(0,r.jsx)(l,{})]})})})]})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[690,431,441,684,358],()=>t(1146)),_N_E=e.O()}]);