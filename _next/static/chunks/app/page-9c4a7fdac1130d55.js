(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{2989:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});let r={name:"UNICOM",availableFor:["UNICOM"],phrases:[{speaker:"Pilot",text:{pt:[{content:"{{callsign}}, posi\xe7\xe3o e altitude {{location}} {{altitude}}.",weight:3},{content:"Avi\xe3o {{callsign}} reportando localiza\xe7\xe3o {{location}}, altitude {{altitude}}.",weight:1}],en:[{content:"{{callsign}}, position and altitude {{location}} {{altitude}}.",weight:3},{content:"Aircraft {{callsign}} reporting location {{location}}, altitude {{altitude}}.",weight:1}]},context:"Relato de posi\xe7\xe3o e altitude do piloto",usage_context:["VFR","UNICOM"]},{speaker:"Pilot",text:{pt:[{content:"{{callsign}}, solicitando informa\xe7\xf5es sobre o tr\xe1fego nas proximidades.",weight:3},{content:"Avi\xe3o {{callsign}} buscando informa\xe7\xf5es sobre tr\xe1fego pr\xf3ximo.",weight:1}],en:[{content:"{{callsign}}, requesting traffic information in the vicinity.",weight:3},{content:"Aircraft {{callsign}} looking for nearby traffic information.",weight:1}]},context:"Solicita\xe7\xe3o de informa\xe7\xf5es de tr\xe1fego",usage_context:["VFR","UNICOM"]},{speaker:"Pilot",text:{pt:[{content:"Avi\xe3o {{callsign}} a caminho de {{destination}}, altitude {{altitude}}.",weight:3},{content:"Voo {{callsign}} em dire\xe7\xe3o a {{destination}}, \xe0 altitude {{altitude}}.",weight:1}],en:[{content:"Aircraft {{callsign}} en route to {{destination}}, altitude {{altitude}}.",weight:3},{content:"Flight {{callsign}} heading towards {{destination}}, at altitude {{altitude}}.",weight:1}]},context:"Relato da rota do piloto",usage_context:["VFR","UNICOM"]},{speaker:"Pilot",text:{pt:[{content:"Avi\xe3o {{callsign}} solicitando permiss\xe3o para pouso em {{destination}}.",weight:3},{content:"Solicito permiss\xe3o para pouso em {{destination}}, {{callsign}}.",weight:1}],en:[{content:"Aircraft {{callsign}} requesting landing clearance at {{destination}}.",weight:3},{content:"Requesting landing clearance at {{destination}}, {{callsign}}.",weight:1}]},context:"Solicita\xe7\xe3o de permiss\xe3o para pouso",usage_context:["VFR","UNICOM"]},{speaker:"Pilot",text:{pt:[{content:"{{callsign}}, localiza\xe7\xe3o atual {{location}}, altitude {{altitude}}.",weight:3},{content:"Avi\xe3o {{callsign}} est\xe1 em {{location}}, altitude {{altitude}}.",weight:1}],en:[{content:"{{callsign}}, current location {{location}}, altitude {{altitude}}.",weight:3},{content:"Aircraft {{callsign}} is at {{location}}, altitude {{altitude}}.",weight:1}]},context:"Informa\xe7\xe3o de posi\xe7\xe3o e altitude de voo em \xe1rea n\xe3o controlada",usage_context:["VFR","UNICOM"]}]}},4924:(e,t,a)=>{Promise.resolve().then(a.bind(a,5978))},5402:()=>{},5978:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>ec});var r=a(5155),i=a(2115),l=a(5648);async function n(e){try{return(await a(7536)("./".concat(e))).default}catch(t){return console.error('Erro ao carregar a fase "'.concat(e,'":'),t),null}}let s=[{id:"clearance",label:"Clearance",availableFor:["DEP_DEL","CTR"]},{id:"pushback",label:"Pushback",availableFor:["DEP_GND","I_TWR"]},{id:"taxi",label:"Taxi",availableFor:["DEP_GND"]},{id:"beforeTakeoff",label:"Before Takeoff",availableFor:["DEP_TWR"]},{id:"takeoff",label:"Takeoff",availableFor:["DEP_TWR","CTR"]},{id:"enroute",label:"Enroute",availableFor:["CTR"]},{id:"arrival",label:"Arrival",availableFor:["ARR_APP","ARR_TWR"]},{id:"approach",label:"Approach",availableFor:["ARR_APP","ARR_TWR"]},{id:"landing",label:"Landing",availableFor:["ARR_TWR"]},{id:"taxiToGate",label:"Taxi to Gate",availableFor:["ARR_GND"]},{id:"shutdown",label:"Shutdown",availableFor:["ARR_GND","I_TWR"]}];var o=a(7922);let d=[{id:"scheduled",label:"Voo Programado"},{id:"emergency",label:"Voo de Emerg\xeancia"},{id:"radioFailure",label:"radioFailure"},{id:"hijack",label:"hijack"},{id:"diverted",label:"Voo de Desvio"},{id:"priority",label:"Voo com Prioridade"}],c={tagWeight:2,contextTagWeight:.5,weightWeight:.5},g=function(e,t){var a,r,i,l,n;let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c,o=null!=(i=null==(a=e.tags)?void 0:a.reduce((e,a)=>e+ +!!t.includes(a),0))?i:0,d=null!=(l=null==(r=e.contextTags)?void 0:r.reduce((e,a)=>e+.5*!!t.includes(a),0))?l:0,g=null!=(n=e.weight)?n:0;return o*s.tagWeight+d*s.contextTagWeight+g*s.weightWeight},u=(e,t,a)=>{var r;if(!Array.isArray(e)||0===e.length)return"";let i=e.map(e=>"string"==typeof e?{content:e,weight:1,tags:[],contextTags:[]}:e),l=i.filter(e=>e.content!==a).map(e=>({...e,score:g(e,t)}));return 0===l.length?(null==(r=i[0])?void 0:r.content)||"":(l.sort((e,t)=>t.score-e.score),l[0].content)},x=(e,t)=>[e.flightType,t.name.toUpperCase(),...e.userFlags||[]],m=(e,t)=>{if(!e||!Array.isArray(e.phrases))return[];let a=x(t,e),r=t.userFlags||[];return e.phrases.filter(e=>{let i=!0;return e.required_flags&&e.required_flags.length>0&&(e.required_flags.every(e=>r.includes(e))||(i=!1)),e.excluded_flags&&e.excluded_flags.length>0&&e.excluded_flags.some(e=>r.includes(e))&&(i=!1),e.usage_context&&e.usage_context.length>0&&(e.usage_context.some(e=>a.includes(e))||(i=!1)),t.isAwaitingReadback&&e.readback_context!==t.readback&&(i=!1),i})},h=e=>{let{flightInfo:t}=(0,l.S)();return(0,i.useMemo)(()=>e&&e.phrases?m(e,t):[],[e,t.userFlags,t.isAwaitingReadback,t.readback,t.flightType,t.approachType])};var b=a(2596),p=a(9688);function f(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,p.QP)((0,b.$)(t))}function y(e){let{className:t,...a}=e;return(0,r.jsx)("div",{className:f("w-full mx-auto p-4 lg:p-6 rounded-lg lg:rounded-2xl lg:shadow-lg",t),...a})}function k(e){let{className:t,...a}=e;return(0,r.jsx)("div",{className:f("p-4 border-b border-zinc-200 text-blue-600 dark:border-zinc-200",t),...a})}function v(e){let{className:t,...a}=e;return(0,r.jsx)("h3",{className:f("text-lg font-semibold",t),...a})}function j(e){let{className:t,...a}=e;return(0,r.jsx)("p",{className:f("text-sm text-zinc-500 dark:text-zinc-400",t),...a})}function w(e){let{className:t,...a}=e;return(0,r.jsx)("div",{className:f("p-4 ",t),...a})}function N(e){let{className:t,...a}=e;return(0,r.jsx)("div",{className:f("p-4 border-t border-zinc-200 dark:border-zinc-200 flex justify-end",t),...a})}var S=a(884);let C=e=>{let{name:t,trainingMode:a=!1,type:l,displayedText:n}=e,[s,d]=(0,i.useState)(!1),{placeholders:c={},setPlaceholder:g}=(0,S.O)(),{showPhonetic:u}=(0,o._)(),x=c[t],m=null!=x?x:{raw:"",phonetic:void 0},h=void 0!==n?n:m.raw||t,[b,p]=(0,i.useState)(m.raw||"");(0,i.useEffect)(()=>{s&&p(m.raw||"")},[s,m.raw]);let f=()=>{let e;if(m.phonetic,"arrival.wind_direction_formatted"===t||"departure.wind_direction_formatted"===t){let t=b.trim().toUpperCase();e="VARI\xc1VEL"!==t&&"VARIABLE"!==t&&"CALMO"!==t&&"CALM"!==t}else e=void 0!==m.phonetic;g(t,b.trim().toUpperCase(),{type:l,phonetic:e}),d(!1)};return s?(0,r.jsx)("input",{className:"inline border-b border-blue-400 px-1 text-base text-blue-800 dark:text-green-200 bg-transparent focus:italic focus:outline-none uppercase",autoFocus:!0,value:b,onChange:e=>p(e.target.value.toUpperCase()),onBlur:f,onKeyDown:e=>{"Enter"===e.key&&f()}}):(0,r.jsxs)("span",{className:"font-semibold underline hover:underline cursor-pointer uppercase",onClick:()=>{d(!0)},children:[u&&m.phonetic&&""!==m.phonetic.trim()?m.phonetic:h," "]})};a(396);var A=a(1951),T=a(9588),F=a(7835),z=a(646),R=a(4861),_=a(5339);a(5402);let O=e=>{let{children:t,text:a,placement:l="bottom",delay:n=100,className:s=""}=e,[o,d]=(0,i.useState)(!1),c=(0,i.useRef)(null),g=(0,i.useRef)(null),u="adaptive-tooltip-content ".concat(l," ").concat(s," ").concat(o?"visible":"");return(0,r.jsxs)("span",{className:"relative inline-flex items-center group",onMouseEnter:()=>{c.current=setTimeout(()=>{d(!0)},n)},onMouseLeave:()=>{c.current&&clearTimeout(c.current),c.current=setTimeout(()=>{d(!1)},n)},children:[t,(0,r.jsxs)("span",{ref:g,className:u,children:[" ",a]})]})};var P=a(9049),E=a(7509),I=a(3013);let M=e=>{let{stage:t}=e,{flightInfo:a,setFlightInfo:n}=(0,l.S)(),{placeholders:s}=(0,S.O)(),d=a.language||"pt",{showPhonetic:c,setShowPhonetic:g}=(0,o._)(),[x,m]=(0,i.useState)([]),[b,p]=(0,i.useState)([]),[f,v]=(0,i.useState)(!1),[j,M]=(0,i.useState)([]),[D,L]=(0,i.useState)({}),U=h(t),B=(0,i.useMemo)(()=>U,[t,U]);(0,i.useEffect)(()=>{let e=W(),t=B.map(t=>{let a=t.text[d];return Array.isArray(a)?u(a,e):a}),a=B.map((e,a)=>({...e,selectedText:t[a]}));p(a),m(a.map(e=>e.selectedText))},[B,d,t]),(0,i.useEffect)(()=>{if(!b||0===b.length)return;let e=b.map((e,t)=>"Pilot"===e.speaker&&e.readback_response?t:null).filter(e=>null!==e);M(e),v(e.length>0),e.forEach(e=>{var t;let a=(null==(t=b[e])?void 0:t.selectedText)||"";$(e,"string"==typeof a?a:a.content)})},[b]);let W=()=>{let e=[];return a.flightType&&e.push(a.flightType),(null==t?void 0:t.name)&&e.push(t.name),a.flags&&e.push(...a.flags),a.approachType&&e.push(a.approachType),e},V=e=>{var t,a;let r=B[e].text[d],i=W();if(!Array.isArray(r))return;let l="string"==typeof r[0]?r.map(e=>({content:e,tags:[],contextTags:[],weight:0})):r,n=x[e],s=(null==(t=l.filter(e=>e.content!==("string"==typeof n?n:n.content)).map(e=>{var t,a,r,l,n;return{...e,score:(null!=(r=null==(t=e.tags)?void 0:t.reduce((e,t)=>e+ +!!i.includes(t),0))?r:0)*2+(null!=(l=null==(a=e.contextTags)?void 0:a.reduce((e,t)=>e+.5*!!i.includes(t),0))?l:0)+(null!=(n=e.weight)?n:0)*.5}}).sort((e,t)=>t.score-e.score)[0])?void 0:t.content)||(null==(a=l[0])?void 0:a.content);m(t=>{let a=[...t];return a[e]=String(s),a}),B[e].readback_response&&$(e,String(s))},G={pt:["a","e","o","de","com","para","por","em","sobre","n\xe3o","s\xf3","que","ela","ele"],en:["the","and","or","but","if","in","on","at","by","with","about","for"]},J=e=>String(e||"").toLowerCase().replace(/{{\s*(.*?)\s*}}/g,(e,t)=>"{{".concat(t.trim(),"}}")).replace(/[^\w\s{}]/g,"").trim(),H=e=>e.replace(/^\{\{|\}\}$/g,"").trim(),q=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"pt",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=G[t]||[];return[...new Set(J(e).split(/\s+/).map(e=>e.startsWith("{{")&&e.endsWith("}}")?e:e.replace(/\.$/,"")).filter(e=>!r.includes(e)&&(e.startsWith("{{")&&e.endsWith("}}")||e.length>=a)))]},K=function(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2],0===e.length)return{matchedWords:[],coverage:0};let a=e.filter(e=>t.some(t=>H(e)===H(t))),r=a.length/e.length;return{matchedWords:a,coverage:r}},$=function(e,t){var a;if(arguments.length>2&&void 0!==arguments[2]&&arguments[2],e<=0||(null==(a=B[e-1])?void 0:a.speaker)!=="ATC")return!1;let r=B[e-1].text[d],i=q(t,d),l=0;if(Array.isArray(r))r.forEach(e=>{let{matchedWords:t,coverage:a}=K(q("string"==typeof e?e:e.content,d),i,.6);a>l&&(l=a)});else if("string"==typeof r){let{matchedWords:e,coverage:t}=K(q(r,d),i,.6);l=t}let n=l>=.6;return L(t=>({...t,[e]:n?"correct":"incorrect"})),n},Q=function(e,a){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l="string"==typeof e?e:e.content;if(l.includes("{{greeting}}")){let e=(0,I.e)(d);l=l.replace("{{greeting}}",e)}return!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};({...P.A,...e})}({...t.placeholdersConfig,...i}),function(e,t){let a,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],l=/{{(.*?)}}/g,n=[],s=0;for(;null!==(a=l.exec(e));){let[t,l]=a,o=a.index;o>s&&n.push(e.slice(s,o)),n.push((0,r.jsx)(C,{name:l,trainingMode:i},l+o)),s=o+t.length}return s<e.length&&n.push(e.slice(s)),n}(l,s,!0)};return(0,r.jsx)("div",{className:"dark",children:(0,r.jsxs)(y,{className:"mb-6 rounded-2xl bg-white border-gray-200   dark:bg-zinc-900 dark:border-zinc-700 dark:text-gray-100",children:[(0,r.jsxs)(k,{className:"flex justify-between items-center border-b pb-4 border-gray-200 dark:border-zinc-700",children:[(0,r.jsx)("div",{className:"flex items-center space-x-2",children:(0,r.jsx)("button",{onClick:()=>g(!c),className:"flex items-center px-3 py-2 text-sm font-medium text-gray-600 bg-gray-50 rounded-md hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-400 transition   dark:text-gray-300 dark:bg-zinc-700 dark:hover:bg-zinc-600 dark:focus:ring-zinc-600",children:c?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(A.A,{className:"w-5 h-5 mr-2 text-gray-600 dark:text-gray-300"}),(0,r.jsx)("span",{children:"Ocultar Fon\xe9tica"})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(T.A,{className:"w-5 h-5 mr-2 text-gray-600 dark:text-gray-300"}),"Exibir Fon\xe9tica"]})})}),(0,r.jsx)("div",{className:"flex items-center space-x-2",children:(0,r.jsxs)("button",{onClick:()=>{let e="pt"===d?"en":"pt";n({...a,language:e})},className:"flex items-center px-3 py-2 text-sm font-medium text-blue-600 bg-blue-50 rounded-md hover:bg-blue-100 focus:outline-none focus:ring-2 focus:ring-blue-400 transition   dark:text-blue-400 dark:bg-blue-900 dark:hover:bg-blue-800 dark:focus:ring-blue-600",children:[(0,r.jsx)(F.A,{className:"w-5 h-5 mr-2 text-blue-600 dark:text-blue-400"}),d.toUpperCase()]})})]}),(0,r.jsx)(w,{className:"space-y-4 pt-4",children:B.length>0?B.map((e,t)=>{let a=j.includes(t),i="correct"===D[t],l=x[t]||(Array.isArray(e.text[d])?e.text[d][0]:e.text[d]),n=Q("string"==typeof l?l:l.content,t,e.placeholders||{}),o="ATC"===e.speaker,c="p-4 rounded-xl border transition \n                ".concat(a&&i?"border-green-500 bg-green-50 dark:bg-green-900 dark:border-green-700":"border-gray-200 dark:border-zinc-700","\n                ").concat(o?"bg-blue-50 dark:bg-blue-900 text-blue-900 dark:text-blue-200":"bg-green-50 dark:bg-emerald-900 text-green-900 dark:text-emerald-200","\n                ").concat(e.delay_response&&"bg-gray-100 dark:bg-zinc-800","\n              ");return(0,r.jsxs)("div",{className:c,children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-2 text-xs text-gray-500 dark:text-gray-400",children:[(0,r.jsxs)("span",{className:"flex items-center",children:[(0,r.jsx)("span",{className:"uppercase ",children:!o&&s.callsign?(0,r.jsxs)("strong",{className:"font-bold text-blue-600 italic flex items-center gap-1 dark:text-blue-400",children:[(0,r.jsx)(E.i3Z,{className:"w-5 h-5"}),s.callsign.raw]}):(0,r.jsxs)("strong",{className:"font-bold text-green-600 italic flex items-center gap-1 dark:text-emerald-400",children:[(0,r.jsx)(E.WQ6,{className:"w-5 h-5"}),e.speaker]})}),(0,r.jsx)("span",{className:"ml-1 italic text-gray-500 dark:text-gray-400"}),a&&(0,r.jsxs)("span",{className:"flex items-center ml-2 space-x-1",children:[(0,r.jsx)("span",{className:"px-2 py-0.5 text-green-700 bg-green-200 rounded-md text-[10px] dark:text-green-200 dark:bg-green-800",children:"Readback"}),(0,r.jsxs)(O,{text:"Readback: ".concat(D[t]),children:["correct"===D[t]&&(0,r.jsx)(z.A,{className:"w-4 h-4 text-green-600 dark:text-green-400"}),"incorrect"===D[t]&&(0,r.jsx)(R.A,{className:"w-4 h-4 text-red-600 dark:text-red-400"}),!D[t]&&(0,r.jsx)(_.A,{className:"w-4 h-4 text-yellow-600 dark:text-yellow-400"})]})]})]}),(0,r.jsx)("button",{onClick:()=>V(t),className:"text-xs font-medium text-blue-600 hover:text-blue-700 transition dark:text-blue-400 dark:hover:text-blue-300",children:"Alternar varia\xe7\xe3o"})]}),(0,r.jsx)("p",{className:"font-medium leading-relaxed dark:text-gray-100",children:n})]},t)}):(0,r.jsx)("p",{className:"text-sm text-red-500 dark:text-red-400",children:"Nenhuma frase aplic\xe1vel para esse contexto."})}),(0,r.jsx)(N,{className:"pt-4 border-t border-gray-200 dark:border-zinc-700",children:(0,r.jsx)("div",{className:"text-xs text-gray-400 dark:text-gray-500",children:"Use os bot\xf5es de idioma e fon\xe9tica para ajustar a exibi\xe7\xe3o."})})]})})},D=e=>{let{className:t=""}=e,{placeholders:a,clearPlaceholders:i}=(0,S.O)();return Object.keys(a).length>0?(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsxs)("button",{onClick:()=>{confirm("Tem certeza que deseja limpar todos os placeholders salvos? Essa a\xe7\xe3o n\xe3o pode ser desfeita.")&&i()},className:f("flex items-center mt-4 px-4 py-2 text-sm font-medium bg-red-100 text-red-700 rounded hover:bg-red-200 transition",t),children:[(0,r.jsx)(E.mYx,{className:"w-4 h-4 mr-2"}),"Limpar placeholders"]})}):null};var L=a(7869),U=a(5695),B=a(351),W=a(1154),V=a(5673),G=a(1013);let J=e=>{let{onSubmit:t}=e,{flightInfo:a,setFlightInfo:n,resetFlightInfo:s,refreshMetars:o}=(0,l.S)(),{setPlaceholder:c}=(0,S.O)(),[g,u]=(0,i.useState)(()=>{let e=localStorage.getItem("flightInfo");return e?JSON.parse(e):a}),[x,m]=(0,i.useState)(null),[h,b]=(0,i.useState)(!1),[p,f]=(0,i.useState)(!1),[j,N]=(0,i.useState)(null),[C,A]=(0,i.useState)(!1),T=(0,U.useSearchParams)();(0,i.useEffect)(()=>{if(!T)return;let e=localStorage.getItem("flightInfo"),t=e?JSON.parse(e):{},a=null!==T.get("aircraft")||null!==T.get("flightType")||null!==T.get("departure")||null!==T.get("arrival")||null!==T.get("route")||null!==T.get("language")||null!==T.get("availableATCs")||null!==T.get("userFlags")||null!==T.get("fltnum")||null!==T.get("callsign")||null!==T.get("departureSid"),r={...t};if(a){var i,l;let e=T.get("callsign");null!==e&&c("callsign",e||"");let t=T.get("fl");null!==t&&c("cruise.flight_level",t||"");let a={...null!==T.get("callsign")&&{callsign:T.get("callsign")},...null!==T.get("fl")&&{cruiseFlightLevel:T.get("fl")},...null!==T.get("aircraft")&&{aircraft:T.get("aircraft")},...null!==T.get("flightType")&&{flightType:T.get("flightType")},...null!==T.get("departure")&&{origin:T.get("departure")},...null!==T.get("arrival")&&{destination:T.get("arrival")},...null!==T.get("route")&&{route:T.get("route")},...null!==T.get("language")&&{language:T.get("language")},...null!==T.get("departureSid")&&{departureSid:T.get("departureSid")},...null!==T.get("availableATCs")&&{availableATCs:(null==(i=T.get("availableATCs"))?void 0:i.split(","))||[]},...null!==T.get("userFlags")&&{userFlags:(null==(l=T.get("userFlags"))?void 0:l.split(","))||[]}};r={...r,...a}}JSON.stringify(r)!==JSON.stringify(g)&&(u(r),n(r))},[T,c]),(0,i.useEffect)(()=>{JSON.stringify(g)!==JSON.stringify(a)&&(n(g),localStorage.setItem("flightInfo",JSON.stringify(g)))},[g]),(0,i.useEffect)(()=>{JSON.stringify(a)!==JSON.stringify(g)&&u(a)},[a]),(0,i.useEffect)(()=>{var e,t;((null==(e=a.origin)?void 0:e.length)===4||(null==(t=a.destination)?void 0:t.length)===4)&&o()},[a.origin,a.destination,o]);let F=(0,i.useCallback)(e=>{let{name:t,value:a}=e.target,r=["origin","destination","departure","arrival","aircraft","route","departureSid"];u(e=>{var i;let l={...e};return("origin"===t||"destination"===t)&&a.toUpperCase().trim()!==((null==(i=e[t])?void 0:i.toString())||"").toUpperCase().trim()&&(l={...l,simbriefOfp:void 0,originMetar:"origin"===t?"":e.originMetar,destinationMetar:"destination"===t?"":e.destinationMetar,departureRwy:"origin"===t?"":e.departureRwy,arrivalRwy:"destination"===t?"":e.arrivalRwy,departureSid:"origin"===t?"":e.departureSid,departureSidTransition:"origin"===t?"":e.departureSidTransition,arrivalStar:"destination"===t?"":e.arrivalStar,arrivalStarTransition:"destination"===t?"":e.arrivalStarTransition}),l={...l,[t]:r.includes(t)?a.toUpperCase():a}})},[]),z=()=>g.origin&&g.flightType?(m(null),!0):(m("Todos os campos obrigat\xf3rios precisam ser preenchidos."),!1);(0,i.useEffect)(()=>{},[a]);let R=["DEP_DEL","DEP_GND","DEP_TWR","ARR_APP","ARR_TWR","ARR_GND","CTR","I_TWR"],_=()=>{f(!0)},O=async()=>{if(!g.simbriefId)return void N({type:"error",text:"Por favor, insira o ID ou Alias do SimBrief."});b(!0),N(null);try{var e,t,r,i,l;let n="https://www.simbrief.com/api/xml.fetcher.php?",s="";s=/^\d+$/.test(g.simbriefId)?"".concat(n,"userid=").concat(g.simbriefId,"&json=1"):"".concat(n,"username=").concat(g.simbriefId,"&json=1");let o=await fetch(s);if(!o.ok){let e=await o.text();console.error("[FlightInfoForm] Erro na resposta do SimBrief (status: ".concat(o.status,"):"),e);let t="Erro ".concat(o.status,": ").concat(o.statusText,".");if(null==(l=o.headers.get("content-type"))?void 0:l.includes("application/json"))try{t=JSON.parse(e).error||t}catch(e){}throw Error("N\xe3o foi poss\xedvel carregar dados do SimBrief. ".concat(t))}let d=await o.json(),x=d.general,m=d.atc,h=d.origin,b=d.destination,p=d.aircraft,f=d.weather,y=d.text;if(!x||!h||!b||!p||!f||!y)throw Error("Estrutura de dados do SimBrief inesperada. Faltam informa\xe7\xf5es essenciais.");let k=(null==(e=h.atis)?void 0:e.message)||"",v=(null==(t=h.atis)?void 0:t.letter)||"",j=(null==(r=b.atis)?void 0:r.message)||"",w=(null==(i=b.atis)?void 0:i.letter)||"",S={ofpText:y.tlr_section||null,fullOfpHtml:y.plan_html||null,aircraftType:p.icao_code||p.name||null,departureICAO:h.icao_code||null,arrivalICAO:b.icao_code||null,atis_info_origin:v,atis_message_origin:k,atis_info_destination:w,atis_message_destination:j},C={aircraft:p.name||"",callsign:"".concat(x.icao_airline||"").concat(x.flight_number||"").trim(),origin:h.icao_code||"",destination:b.icao_code||"",route:x.route||"",cruiseFlightLevel:m.initial_alt?String(m.initial_alt):"",departureRwy:h.plan_rwy||"",arrivalRwy:b.plan_rwy||"",departureSid:x.sid_ident||"",departureSidTransition:x.sid_trans||"",arrivalStar:x.star_ident||"",arrivalStarTransition:x.star_trans||"",originMetar:f.orig_metar||"",destinationMetar:f.dest_metar||"",simbriefOfp:S};console.log(C.departureSid),u(e=>({...e,...C})),c("originAirportName",h.name||""),a.originCommonName&&c("departure.location",a.originCommonName),a.destinationCommonName&&c("arrival.location",a.destinationCommonName),c("destinationAirportName",b.name||""),N({type:"success",text:"Dados do SimBrief carregados com sucesso!"}),setTimeout(()=>N(null),5e3)}catch(e){console.error("Erro ao carregar dados do SimBrief no frontend:",e),N({type:"error",text:e.message||"Ocorreu um erro desconhecido ao carregar os dados do SimBrief."})}finally{b(!1)}},P=e=>{u(t=>{var a,r;let i=(null==(a=t.availableATCs)?void 0:a.includes(e))?(null==(r=t.availableATCs)?void 0:r.filter(t=>t!==e))||[]:[...t.availableATCs||[],e];return{...t,availableATCs:i}})},I=e=>{u(t=>{var a,r;let i=(null==(a=t.userFlags)?void 0:a.includes(e))?(null==(r=t.userFlags)?void 0:r.filter(t=>t!==e))||[]:[...t.userFlags||[],e];return{...t,userFlags:i}})};return(0,r.jsx)("div",{className:"dark",children:(0,r.jsxs)(y,{className:"w-full mx-auto bg-white dark:bg-zinc-900 dark:text-gray-100 p-0 lg:p-4",children:[(0,r.jsx)(k,{className:"flex items-center justify-between",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(v,{className:"text-2xl font-bold text-blue-500 dark:text-blue-400 mb-0",children:"Informa\xe7\xf5es do Voo"}),(0,r.jsx)("button",{type:"button",onClick:()=>{var e,t;let a=window.location.origin+window.location.pathname,r=new URLSearchParams;g.aircraft&&r.set("aircraft",g.aircraft),g.callsign&&r.set("callsign",g.callsign),g.cruiseFlightLevel&&r.set("fl",g.cruiseFlightLevel),g.flightType&&r.set("flightType",g.flightType),g.origin&&r.set("departure",g.origin),g.destination&&r.set("arrival",g.destination),g.route&&r.set("route",g.route),g.language&&r.set("language",g.language),g.departureSid&&r.set("departureSid",g.departureSid),(null==(e=g.availableATCs)?void 0:e.length)&&r.set("availableATCs",g.availableATCs.join(",")),(null==(t=g.userFlags)?void 0:t.length)&&r.set("userFlags",g.userFlags.join(","));let i="".concat(a,"?").concat(r.toString());navigator.clipboard.writeText(i).then(()=>{alert("URL copiada para a \xe1rea de transfer\xeancia!")}).catch(()=>{alert("Erro ao copiar URL.")})},title:"Compartilhar URL do voo",className:"text-blue-600 hover:text-blue-800 transition p-1 rounded focus:outline-none focus:ring-2 focus:ring-blue-400 dark:text-blue-500 dark:hover:text-300",children:(0,r.jsx)(B.Pum,{size:24})})]})}),(0,r.jsx)(w,{children:(0,r.jsxs)("form",{className:"space-y-10",onSubmit:e=>{if(e.preventDefault(),z()){var r;let e={...g};(null==(r=a.simbriefOfp)?void 0:r.departureICAO)&&g.origin&&g.origin.toUpperCase().trim()!==a.simbriefOfp.departureICAO.toUpperCase().trim()&&(console.warn('Origin mismatch: User entered "'.concat(g.origin,'", SimBrief has "').concat(a.simbriefOfp.departureICAO,'". Clearing SimBrief OFP data.')),e.simbriefOfp=void 0,e.originMetar="",e.destinationMetar="",e.departureRwy="",e.arrivalRwy="",e.departureSid="",e.departureSidTransition="",e.arrivalStar="",e.arrivalStarTransition=""),n(e),localStorage.setItem("flightInfo",JSON.stringify(e)),_(),t(e)}},children:[x&&(0,r.jsx)("div",{className:"text-red-600 dark:text-red-400 font-semibold text-center",children:x}),(0,r.jsxs)("div",{className:"mb-4 bg-gray-100 dark:bg-zinc-800 rounded-lg p-4",children:[(0,r.jsx)("div",{className:"grid md:grid-cols-2 mb-0",children:(0,r.jsxs)("label",{className:"block mb-2 font-medium text-gray-700 dark:text-gray-300",htmlFor:"simbriefId",children:["Simbrief ID ou Alias",(0,r.jsx)("span",{className:"text-gray-500 text-sm ml-2 cursor-help dark:text-gray-400",title:"Insira seu Pilot ID (n\xfamero) ou seu Alias/Username (nome de usu\xe1rio) do SimBrief. Ambos podem ser encontrados nas configura\xe7\xf5es da sua conta SimBrief.",children:"(?)"})]})}),(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-6 mb-0 items-start",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("input",{id:"simbriefId",name:"simbriefId",type:"text",value:a.simbriefId||"",onChange:e=>{let t=e.target.value;u(e=>({...e,simbriefId:t}))},className:"w-full border border-gray-300 rounded-lg px-4 py-3 text-lg text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-400 bg-white/80 dark:bg-zinc-900 dark:border-zinc-800 dark:text-gray-100 dark:focus:ring-blue-500",placeholder:"Ex: 123456 ou meu_username"}),(0,r.jsxs)("p",{className:"text-sm text-gray-500 mt-1 dark:text-gray-400",children:["Encontre seu Pilot ID ou Alias nas"," ",(0,r.jsx)("a",{href:"https://www.simbrief.com/system/profile.php",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline dark:text-blue-400 dark:hover:text-300",children:"configura\xe7\xf5es da sua conta SimBrief"}),"."]})]}),(0,r.jsxs)("div",{className:"flex flex-col h-full",children:[(0,r.jsxs)("button",{type:"button",onClick:O,className:"bg-purple-600 text-white py-3 px-6 rounded-lg font-semibold text-lg hover:bg-purple-700 transition flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed dark:bg-blue-700 dark:hover:bg-blue-800",disabled:h,children:[h?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(W.A,{className:"animate-spin w-5 h-5"}),"Carregando..."]}):(0,r.jsx)(E.OKv,{className:"w-5 h-5"}),"Carregar do SimBrief"]}),(0,r.jsx)("div",{className:"text-sm text-gray-500 mt-1 dark:text-gray-400",children:j&&(0,r.jsx)(L.P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"mt-2 text-center text-sm font-medium ".concat("error"===j.type?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"),children:j.text})})]})]})]}),(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block mb-2 font-medium text-gray-700 dark:text-gray-300",htmlFor:"aircraft",children:"✈️ Aeronave"}),(0,r.jsx)("input",{id:"aircraft",name:"aircraft",type:"text",value:a.aircraft||"",onChange:F,className:"w-full border border-gray-300 rounded-lg px-4 py-3 text-lg text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-400 dark:bg-zinc-800 dark:border-zinc-700 dark:text-gray-100 dark:focus:ring-blue-500",placeholder:"Ex: C172"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block mb-2 font-medium text-gray-700 dark:text-gray-300",htmlFor:"callsign",children:"Indicativo de Chamada"}),(0,r.jsx)("input",{id:"callsign",name:"callsign",type:"text",value:a.callsign||"",onChange:F,className:"w-full border border-gray-300 rounded-lg px-4 py-3 text-lg text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-400 dark:bg-zinc-800 dark:border-zinc-700 dark:text-gray-100 dark:focus:ring-blue-500",placeholder:"Ex: SWA123"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block mb-2 font-medium text-gray-700 dark:text-gray-300",htmlFor:"flightType",children:"Tipo de Voo"}),(0,r.jsxs)("select",{id:"flightType",name:"flightType",value:a.flightType||"",onChange:F,className:"w-full border border-gray-300 rounded-lg px-4 py-3 text-lg text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-400 dark:bg-zinc-800 dark:border-zinc-700 dark:text-gray-100 dark:focus:ring-blue-500",required:!0,children:[(0,r.jsx)("option",{value:"",children:"Selecione o Tipo de Voo"}),(0,r.jsx)("option",{value:"IFR",children:"IFR"}),(0,r.jsx)("option",{value:"VFR",children:"VFR"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block mb-2 font-medium text-gray-700 dark:text-gray-300",htmlFor:"cruiseFlightLevel",children:"N\xedvel de Cruzeiro (FL)"}),(0,r.jsx)("input",{id:"cruiseFlightLevel",name:"cruiseFlightLevel",type:"text",value:a.cruiseFlightLevel||"",onChange:F,className:"w-full border border-gray-300 rounded-lg px-4 py-3 text-lg text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-400 dark:bg-zinc-800 dark:border-zinc-700 dark:text-gray-100 dark:focus:ring-blue-500",placeholder:"Ex: 350"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block mb-2 font-medium text-gray-700 dark:text-gray-300",htmlFor:"origin",children:"Origem"}),(0,r.jsx)("input",{id:"origin",name:"origin",type:"text",value:a.origin||"",onChange:F,maxLength:4,placeholder:"Ex: SBGR",required:!0,className:"w-full border border-gray-300 rounded-lg px-4 py-3 text-lg text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-400 dark:bg-zinc-800 dark:border-zinc-700 dark:text-gray-100 dark:focus:ring-blue-500"}),g.originMetar&&(0,r.jsxs)("div",{className:"text-sm text-gray-600 mt-1 px-1 break-words italic dark:text-gray-400",children:["METAR:"," ",(0,r.jsx)("span",{className:"font-mono text-xs",children:(0,V.O)((0,V.B)(g.originMetar))})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block mb-2 font-medium text-gray-700 dark:text-gray-300",htmlFor:"destination",children:"Destino"}),(0,r.jsx)("input",{id:"destination",name:"destination",type:"text",value:a.destination||"",onChange:F,maxLength:4,placeholder:"Ex: SBSP",className:"w-full border border-gray-300 rounded-lg px-4 py-3 text-lg text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-400 dark:bg-zinc-800 dark:border-zinc-700 dark:text-gray-100 dark:focus:ring-blue-500"}),g.destinationMetar&&(0,r.jsxs)("div",{className:"text-sm text-gray-600 mt-1 px-1 break-words italic dark:text-gray-400",children:["METAR:"," ",(0,r.jsx)("span",{className:"font-mono text-xs",children:(0,V.O)((0,V.B)(g.destinationMetar))})]})]}),(0,r.jsxs)("div",{className:"md:col-span-2",children:[(0,r.jsx)("label",{className:"block mb-2 font-medium text-gray-700 dark:text-gray-300",htmlFor:"route",children:"Rota"}),(0,r.jsx)("textarea",{id:"route",name:"route",value:a.route||"",onChange:F,rows:3,placeholder:"Ex: DCT VES SBSP",className:"w-full border border-gray-300 rounded-lg px-4 py-3 text-lg text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-400 dark:bg-zinc-800 dark:border-zinc-700 dark:text-gray-100 dark:focus:ring-blue-500 resize-y"})]}),(0,r.jsxs)("div",{className:"md:col-span-2",children:[(0,r.jsx)("label",{className:"block mb-2 font-medium text-gray-700 dark:text-gray-300",htmlFor:"language",children:"\uD83C\uDF10 Idioma"}),(0,r.jsxs)("select",{id:"language",name:"language",value:a.language||"pt",onChange:F,className:"w-full border border-gray-300 rounded-lg px-4 py-3 text-lg text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-400 dark:bg-zinc-800 dark:border-zinc-700 dark:text-gray-100 dark:focus:ring-blue-500",children:[(0,r.jsx)("option",{value:"pt",children:"Portugu\xeas"}),(0,r.jsx)("option",{value:"en",children:"English"})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block mb-3 font-semibold text-gray-700 text-lg dark:text-gray-300",children:"Controladores dispon\xedveis"}),(0,r.jsxs)("div",{className:"flex gap-3 mb-4 flex-col sm:flex-row",children:[(0,r.jsx)("button",{type:"button",onClick:()=>{u(e=>({...e,availableATCs:R}))},className:"flex-1 bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 transition dark:bg-blue-700 dark:hover:bg-blue-800",children:"Selecionar Todos"}),(0,r.jsx)("button",{type:"button",onClick:()=>{u(e=>({...e,availableATCs:[]}))},className:"flex-1 bg-gray-400 text-white py-2 rounded-lg hover:bg-gray-500 transition dark:bg-gray-600 dark:hover:bg-gray-700",children:"Limpar Sele\xe7\xe3o"})]}),(0,r.jsx)("div",{className:"flex flex-wrap gap-3",children:R.map(e=>{var t;let a=null==(t=g.availableATCs)?void 0:t.includes(e);return(0,r.jsx)("button",{type:"button",onClick:()=>P(e),className:"px-4 py-2 rounded-lg text-sm transition font-medium ".concat(a?"bg-blue-600 text-white dark:bg-blue-700 dark:text-gray-100":"bg-gray-200 text-gray-800 dark:bg-zinc-700 dark:text-gray-300"),children:e},e)})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block mb-3 font-semibold text-gray-700 text-lg dark:text-gray-300",children:"Flags do Voo"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-3",children:d.map(e=>{var t;let a=null==(t=g.userFlags)?void 0:t.includes(e.id);return(0,r.jsx)("button",{type:"button",onClick:()=>I(e.id),className:"px-5 py-2 rounded-lg font-medium transition ".concat(a?"bg-blue-600 text-white dark:bg-blue-700 dark:text-gray-100":"bg-gray-200 text-gray-800 dark:bg-zinc-700 dark:text-gray-300"),children:e.label},e.id)})})]}),(0,r.jsx)("button",{type:"button",onClick:()=>A(!C),className:"w-full flex items-center justify-center gap-2 text-blue-600 hover:text-blue-800 transition py-2 px-4 rounded-lg font-semibold text-lg dark:text-blue-400 dark:hover:text-blue-300",children:C?(0,r.jsxs)(r.Fragment,{children:["Menos Op\xe7\xf5es ",(0,r.jsx)(G.XNc,{className:"w-5 h-5"})]}):(0,r.jsxs)(r.Fragment,{children:["Mais Op\xe7\xf5es ",(0,r.jsx)(G._kA,{className:"w-5 h-5"})]})}),C&&(0,r.jsxs)(L.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},className:"overflow-hidden",children:[(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-6 mt-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block mb-2 font-medium text-gray-700 dark:text-gray-300",htmlFor:"departureSid",children:"SID de Partida"}),(0,r.jsx)("input",{id:"departureSid",name:"departureSid",type:"text",value:a.departureSid||"",onChange:F,className:"w-full border border-gray-300 rounded-lg px-4 py-3 text-lg text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-400 dark:bg-zinc-800 dark:border-zinc-700 dark:text-gray-100 dark:focus:ring-blue-500",placeholder:"Ex: OSKAP1A"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block mb-2 font-medium text-gray-700 dark:text-gray-300",htmlFor:"departureSidTransition",children:"Transi\xe7\xe3o do SID"}),(0,r.jsx)("input",{id:"departureSidTransition",name:"departureSidTransition",type:"text",value:a.departureSidTransition||"",onChange:F,className:"w-full border border-gray-300 rounded-lg px-4 py-3 text-lg text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-400 dark:bg-zinc-800 dark:border-zinc-700 dark:text-gray-100 dark:focus:ring-blue-500",placeholder:"Ex: OSKAP"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block mb-2 font-medium text-gray-700 dark:text-gray-300",htmlFor:"departureRwy",children:"Pista de Partida"}),(0,r.jsx)("input",{id:"departureRwy",name:"departureRwy",type:"text",value:a.departureRwy||"",onChange:F,className:"w-full border border-gray-300 rounded-lg px-4 py-3 text-lg text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-400 dark:bg-zinc-800 dark:border-zinc-700 dark:text-gray-100 dark:focus:ring-blue-500",placeholder:"Ex: 27L"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block mb-2 font-medium text-gray-700 dark:text-gray-300",htmlFor:"arrivalRwy",children:"Pista de Chegada"}),(0,r.jsx)("input",{id:"arrivalRwy",name:"arrivalRwy",type:"text",value:a.arrivalRwy||"",onChange:F,className:"w-full border border-gray-300 rounded-lg px-4 py-3 text-lg text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-400 dark:bg-zinc-800 dark:border-zinc-700 dark:text-gray-100 dark:focus:ring-blue-500",placeholder:"Ex: 09R"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block mb-2 font-medium text-gray-700 dark:text-gray-300",htmlFor:"arrivalStar",children:"STAR de Chegada"}),(0,r.jsx)("input",{id:"arrivalStar",name:"arrivalStar",type:"text",value:a.arrivalStar||"",onChange:F,className:"w-full border border-gray-300 rounded-lg px-4 py-3 text-lg text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-400 dark:bg-zinc-800 dark:border-zinc-700 dark:text-gray-100 dark:focus:ring-blue-500",placeholder:"Ex: POGAT1A"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block mb-2 font-medium text-gray-700 dark:text-gray-300",htmlFor:"arrivalStarTransition",children:"Transi\xe7\xe3o da STAR"}),(0,r.jsx)("input",{id:"arrivalStarTransition",name:"arrivalStarTransition",type:"text",value:a.arrivalStarTransition||"",onChange:F,className:"w-full border border-gray-300 rounded-lg px-4 py-3 text-lg text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-400 dark:bg-zinc-800 dark:border-zinc-700 dark:text-gray-100 dark:focus:ring-blue-500",placeholder:"Ex: POGAT"})]})]})," "]}),(0,r.jsx)("div",{className:"mt-10",children:(0,r.jsxs)("button",{type:"submit",className:"w-full bg-blue-600 text-white py-4 px-6 rounded-lg font-bold text-xl hover:bg-blue-700 transition flex items-center justify-center gap-3 dark:bg-green-600 dark:hover:bg-green-700",children:[(0,r.jsx)(E.ewK,{className:"w-6 h-6"}),"Iniciar Voo"]})})]})})]})})};var H=a(2989),q=a(133),K=a(2355),$=a(3052),Q=a(7434),Y=a(7948),Z=a(760);let X=Object.fromEntries(d.map(e=>[e.id,e.label]));var ee=a(4416);function et(e){let{onClose:t}=e,{flightInfo:a,setFlightInfo:n}=(0,l.S)(),{setPlaceholder:s}=(0,S.O)(),[o,c]=(0,i.useState)(a.userFlags);(0,i.useEffect)(()=>{let e=o.includes("emergency")?"7700":o.includes("radioFailure")?"7600":o.includes("hijack")?"7500":"2000";s("priority.squawk",e),s("departure.squawk",e)},[o,s]),(0,i.useEffect)(()=>{c(a.userFlags)},[a.userFlags]);let g=(0,i.useCallback)(e=>{c(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},[]);return(0,r.jsx)(Z.N,{children:(0,r.jsxs)(L.P.div,{className:"fixed inset-0 z-50 flex items-center justify-center dark",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[(0,r.jsx)(L.P.div,{className:"absolute inset-0 bg-black/40 backdrop-blur-sm dark:bg-black/60",onClick:t,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}}),(0,r.jsxs)(L.P.div,{className:"relative z-10 bg-white rounded-xl p-6 w-[90%] max-w-sm shadow-xl border border-gray-200   dark:bg-zinc-800 dark:border-zinc-700 dark:text-gray-100",initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{duration:.2},onClick:e=>e.stopPropagation(),children:[(0,r.jsx)("button",{onClick:t,className:"absolute top-3 right-3 text-gray-400 hover:text-gray-600 transition   dark:text-gray-400 dark:hover:text-gray-200","aria-label":"Fechar",children:(0,r.jsx)(ee.A,{className:"w-5 h-5"})}),(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-800 mb-4 dark:text-gray-100",children:"Selecionar Bandeiras do Voo"}),(0,r.jsx)("div",{className:"space-y-2 max-h-60 overflow-y-auto pr-1",children:d.map(e=>{let{id:t,label:a}=e,i=o.includes(t);return(0,r.jsxs)("button",{onClick:()=>g(t),className:"w-full text-left px-4 py-2 rounded-lg text-sm font-medium flex items-center justify-between border transition-all\n                                        ".concat(i?"bg-blue-600 text-white border-blue-600 shadow dark:bg-blue-700 dark:border-blue-700 dark:hover:bg-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-100 dark:bg-zinc-700 dark:text-gray-200 dark:border-zinc-700 dark:hover:bg-zinc-600"),children:[a,i&&(0,r.jsx)("span",{className:"text-white text-xs bg-blue-800 px-2 py-0.5 rounded-full dark:bg-blue-600",children:"Selecionado"})]},t)})}),(0,r.jsxs)("div",{className:"mt-5 flex justify-end gap-2",children:[(0,r.jsx)("button",{onClick:t,className:"text-sm px-4 py-2 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700 transition   dark:bg-zinc-700 dark:hover:bg-zinc-600 dark:text-gray-200",children:"Cancelar"}),(0,r.jsx)("button",{onClick:()=>{n(e=>({...e,userFlags:o})),t()},className:"text-sm px-4 py-2 rounded-md bg-blue-600 hover:bg-blue-700 text-white font-medium transition   dark:bg-blue-700 dark:hover:bg-blue-600",children:"Salvar"})]})]})]})})}var ea=a(9911),er=a(4516);let ei=e=>{let{onRefresh:t,loading:a,error:l,originMetar:n,destinationMetar:s,departureIcao:o,arrivalIcao:d,className:c,onClose:g}=e,[u,x]=(0,i.useState)(!0),[m,h]=(0,i.useState)(""),[b,p]=(0,i.useState)(null),[j,N]=(0,i.useState)(!1),[S,C]=(0,i.useState)(null),A=e=>{let t=e.match(/\d{6}Z/);if(!t)return null;let a=t[0].substring(2,6);return"Observed at: ".concat(a,"Z")},T=async()=>{if(!m)return void C("Please enter an ICAO code.");N(!0),C(null),p(null);try{let e=await fetch("https://metar.vatsim.net/metar.php?id=".concat(m.toUpperCase())),t=await e.text();if(!e.ok||!t||t.toUpperCase().includes("NO METAR"))throw Error("METAR not found or an error occurred.");p(t.trim())}catch(e){C(e.message||"Error fetching METAR. Check the ICAO code.")}finally{N(!1)}},F=(e,t,a,i)=>{let l,n,s,o,d,c=(0,V.B)(a);switch(i){case"origin":l="bg-blue-50 border-blue-200 dark:bg-blue-900 dark:border-blue-800",n="text-blue-700 dark:text-blue-200",s="text-blue-600 dark:text-blue-300",o="text-blue-900 dark:text-blue-100",d="text-blue-700 dark:text-blue-200";break;case"destination":l="bg-green-50 border-green-200 dark:bg-green-900 dark:border-green-800",n="text-green-700 dark:text-green-200",s="text-green-600 dark:text-green-300",o="text-green-900 dark:text-green-100",d="text-green-700 dark:text-green-200";break;case"manual":l="bg-purple-50 border-purple-200 dark:bg-purple-900 dark:border-purple-800",n="text-purple-700 dark:text-purple-200",s="text-purple-600 dark:text-purple-300",o="text-purple-900 dark:text-purple-100",d="text-purple-700 dark:text-purple-200";break;default:l="bg-gray-50 border-gray-200 dark:bg-zinc-700 dark:border-zinc-600",n="text-gray-700 dark:text-gray-300",s="text-gray-600 dark:text-gray-400",o="text-gray-900 dark:text-gray-100",d="text-gray-700 dark:text-gray-300"}return(0,r.jsxs)("div",{className:f("p-3 rounded-lg border shadow-sm ",l),children:[(0,r.jsxs)("h3",{className:f("flex items-center gap-2 text-base font-semibold mb-1",n),children:[(0,r.jsx)(er.A,{className:"w-4 h-4"}),e,": ",t||"N/A"]}),(null==c?void 0:c.time)&&(0,r.jsx)("p",{className:f("text-xs italic mb-1",s),children:A(c.time)}),(0,r.jsx)("p",{className:f("font-mono text-sm break-words",o),children:null==c?void 0:c.raw}),(0,r.jsx)("p",{className:f("text-xs mb-1 opacity-80 leading-snug",d),children:(0,V.O)(c)})]})};return n||s||a||l||b||S?(0,r.jsxs)("div",{className:f("dark",c),children:[" ",(0,r.jsxs)(y,{className:"rounded-0 rounded-t-4xl rounded-b-0 shadow-lg bg-gray-50 border border-gray-200 dark:bg-zinc-950  dark:md:bg-zinc-800 dark:border-zinc-700 dark:text-gray-100",children:[(0,r.jsxs)(k,{className:"flex flex-row justify-between items-center pb-2 border-b border-gray-200 dark:border-zinc-700",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(ea.pBt,{className:"w-5 h-5 text-blue-500 dark:text-blue-400"}),(0,r.jsx)(v,{className:"text-base md:text-lg font-semibold text-blue-700 dark:text-blue-400",children:"METAR"})]}),(0,r.jsxs)("button",{onClick:t,disabled:a,className:"flex items-center px-3 py-1 text-sm font-medium text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200 transition disabled:opacity-50   dark:text-gray-300 dark:bg-zinc-700 dark:hover:bg-zinc-600 dark:disabled:opacity-40",children:[a?(0,r.jsx)(W.A,{className:"w-4 h-4 mr-2 animate-spin text-gray-600 dark:text-gray-300"}):(0,r.jsx)(q.A,{className:"w-4 h-4 mr-2 text-gray-600 dark:text-gray-300"}),"Refresh"]})]}),(0,r.jsx)("button",{onClick:g,className:"absolute top-4 right-4 p-2 rounded-full bg-gray-200 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition","aria-label":"Fechar plano de voo",children:(0,r.jsx)(ee.A,{className:"w-5 h-5"})})]}),u&&(0,r.jsxs)(w,{className:"space-y-3 pt-3 max-h-[70vh] styled-scrollbar overflow-y-auto pb-15",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 items-center w-full",children:[(0,r.jsx)("input",{type:"text",placeholder:"Search METAR by ICAO (e.g., SBGR)",value:m,onChange:e=>h(e.target.value.toUpperCase()),onKeyDown:e=>"Enter"===e.key&&T(),className:"px-3 py-2 border rounded-md w-full text-md bg-white text-gray-800   dark:bg-zinc-700 dark:text-gray-100 dark:border-zinc-600   placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400"}),(0,r.jsx)("button",{onClick:T,disabled:j||!m,className:"px-4 py-2 bg-blue-600 text-white rounded-md text-md hover:bg-blue-700 transition disabled:opacity-50 w-full sm:w-auto   dark:bg-blue-800 dark:hover:bg-blue-700 dark:disabled:opacity-40",children:j?(0,r.jsx)(W.A,{className:"w-4 h-4 animate-spin text-white"}):"Search"})]}),l&&(0,r.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-red-100 text-red-700 rounded-lg dark:bg-red-900 dark:text-red-200",children:[(0,r.jsx)(_.A,{className:"w-5 h-5"}),(0,r.jsx)("p",{className:"text-sm",children:l})]}),n&&F("Origin",o,n,"origin"),s&&F("Destination",d,s,"destination"),b&&F("Manual Query",m,b,"manual"),S&&(0,r.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-yellow-100 text-yellow-800 rounded-lg dark:bg-yellow-900 dark:text-yellow-200",children:[(0,r.jsx)(_.A,{className:"w-5 h-5"}),(0,r.jsx)("p",{className:"text-sm",children:S})]}),!n&&!s&&!a&&!l&&!b&&!S&&(0,r.jsx)("p",{className:"text-gray-500 text-center text-sm dark:text-gray-400",children:"No METAR available for this flight."})]})]})]}):null};var el=a(841),en=a(3509),es=a(2098);let eo=()=>{let{theme:e,toggleTheme:t,resolvedTheme:a,setTheme:i}=(0,el.D)();return(0,r.jsx)("button",{onClick:t,className:"p-3 rounded-full bg-gray-200 text-gray-800 dark:bg-gray-700 dark:text-gray-100 shadow-md hover:scale-105 transition-all duration-200 flex items-center justify-center","aria-label":"Mudar para tema ".concat("light"===a?"escuro":"claro"),title:"Mudar para tema ".concat("light"===a?"escuro":"claro"),children:"light"===a?(0,r.jsx)(en.A,{className:"w-5 h-5"}):(0,r.jsx)(es.A,{className:"w-5 h-5"})})},ed=e=>{let{ofpText:t,fullOfpHtml:a,aircraftType:l,departureIcao:n,arrivalIcao:s,loading:o,error:d,onClose:c}=e,[g,u]=(0,i.useState)(!0);return(0,r.jsxs)(L.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:f("fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm","dark:bg-black/90"),children:[(0,r.jsx)("button",{onClick:c,className:"fixed top-6 right-6 p-2 rounded-full bg-gray-200 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition z-[101]","aria-label":"Fechar plano de voo",children:(0,r.jsx)(ee.A,{className:"w-5 h-5"})}),(0,r.jsxs)("div",{className:f("relative bg-white dark:bg-gray-900 rounded-lg shadow-2xl p-6 md:p-8 w-full max-w-2xl max-h-[95vh] overflow-y-auto","text-gray-800 dark:text-gray-100 styled-scrollbar"),children:[(0,r.jsxs)("h2",{className:"text-2xl font-bold mb-4 text-indigo-700 dark:text-indigo-400",children:["Plano de Voo (",n," - ",s,")"]}),l&&(0,r.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:["Aeronave: ",l]}),(0,r.jsxs)("div",{className:"mb-4 flex gap-2 justify-center",children:[a&&(0,r.jsx)("button",{onClick:()=>u(!0),className:f("px-4 py-2 rounded-md text-sm font-medium tab-button",g?"bg-indigo-600 text-white shadow-md active":"bg-gray-200 text-gray-800 hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-200 dark:hover:bg-gray-600"),children:"Full OFP"}),(0,r.jsx)("button",{onClick:()=>u(!1),className:f("px-4 py-2 rounded-md text-sm font-medium tab-button",g?"bg-gray-200 text-gray-800 hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-200 dark:hover:bg-gray-600":"bg-indigo-600 text-white shadow-md active"),children:"Takeoff/Landing Report"})]}),o&&(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center py-8",children:[(0,r.jsx)("span",{className:"loader"}),(0,r.jsx)("p",{className:"text-blue-500 dark:text-blue-300 mt-4",children:"Carregando OFP..."})]}),d&&(0,r.jsx)("p",{className:"text-red-500 dark:text-red-400 mb-4",children:d}),!o&&!d&&(0,r.jsx)(r.Fragment,{children:g&&a?(0,r.jsx)("div",{className:"bg-gray-50 dark:bg-gray-800 p-4 rounded-md text-xs font-mono border border-gray-200 dark:border-gray-700 overflow-y-auto styled-scrollbar",dangerouslySetInnerHTML:{__html:a}}):t?(0,r.jsx)("div",{className:"bg-gray-50 dark:bg-gray-800 p-4 rounded-md text-xs font-mono whitespace-pre-wrap break-all overflow-x-auto border border-gray-200 dark:border-gray-700 styled-scrollbar",children:t}):(0,r.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"Nenhum plano de voo dispon\xedvel."})})]})]})},ec=()=>{var e,t,a;let{flightInfo:o,setFlightInfo:d,resetFlightInfo:c,loadingMetar:g,metarError:u,refreshMetars:x}=(0,l.S)(),[m,h]=(0,i.useState)(!1),[b,p]=(0,i.useState)([]),[y,k]=(0,i.useState)(!0),[w,N]=(0,i.useState)(0),[S,C]=(0,i.useState)(0),[A,T]=(0,i.useState)(!1),[F,z]=(0,i.useState)(!1),[R,_]=(0,i.useState)(!1),O=(0,U.useRouter)(),[P,I]=(0,i.useState)(!1),[B,V]=(0,i.useState)(!0),[G,ee]=(0,i.useState)(!1),er=(0,i.useCallback)(async()=>{var e;k(!0);let t=null==(e=b[w])?void 0:e.id;try{let e,a,r=(await Promise.all(s.map(async e=>{let t=await n(e.id);return{...e,...t}}))).filter(e=>{var t;return!!e&&!!Array.isArray(e.phrases)&&0!==e.phrases.length&&!!((null==(t=e.availableFor)?void 0:t.length)===0||e.availableFor.some(e=>{var t;return"UNICOM"===e||(null==(t=o.availableATCs)?void 0:t.includes(e))}))}).map(e=>({...e,name:e.name||e.label,description:e.description||"",phrases:e.phrases||[]}));if(0===r.length)e=[H.default],a=0;else{e=r;let i=r.findIndex(e=>e.id===t);a=i>=0&&i<r.length?i:0}JSON.stringify(b)!==JSON.stringify(e)&&p(e),w!==a&&N(a)}catch(e){console.error("Error loading stages:",e)}finally{k(!1)}},[o.availableATCs,b,w]);function el(){w>0&&(N(w-1),window.scrollTo(0,0))}(0,i.useEffect)(()=>{er()},[er]),(0,i.useEffect)(()=>{b.length>0&&C((w+1)/b.length*100)},[w,b.length]);let en=()=>{let e=w+1;e<b.length?N(e):T(!0),window.scrollTo(0,0)},es=e=>{N(e),window.scrollTo(0,0)};if(y)return(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-br from-indigo-50 to-white dark:from-zinc-900 dark:to-zinc-950 text-gray-800 dark:text-white",children:[(0,r.jsx)(W.A,{className:"animate-spin w-16 h-16 mb-4 text-indigo-500"}),(0,r.jsx)("p",{className:"text-2xl font-semibold text-indigo-600 dark:text-indigo-400",children:"Loading phases..."})]});if(A)return(0,r.jsxs)("div",{className:"min-h-screen mx-auto flex flex-col items-center justify-center px-6 relative overflow-hidden bg-gradient-to-br from-indigo-50 to-white dark:from-zinc-900 dark:to-zinc-950 text-gray-800 dark:text-white",children:[(0,r.jsx)(Y.A,{width:window.innerWidth,height:window.innerHeight,numberOfPieces:300,gravity:.1,recycle:!1}),(0,r.jsxs)(L.P.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut"},className:"bg-white dark:bg-zinc-800 p-8 rounded-xl shadow-2xl text-center border border-gray-200 dark:border-zinc-700",children:[(0,r.jsx)("h1",{className:"text-4xl font-extrabold text-indigo-700 dark:text-indigo-400 mb-4",children:"Congratulations, Commander!"}),(0,r.jsx)("p",{className:"text-lg mb-6 text-gray-700 dark:text-gray-300",children:R&&100>Math.round(S)?"You ended the flight early. Here's your progress so far:":"You have successfully completed all phases of your flight. Excellent work!"}),(0,r.jsxs)("div",{className:"text-md mt-4 mb-8 text-gray-600 dark:text-gray-400 space-y-2",children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Flight Progress:"})," ",(0,r.jsxs)("span",{className:"font-semibold text-indigo-600 dark:text-indigo-400",children:[Math.round(S),"%"]})]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Aircraft:"})," ",(0,r.jsx)("span",{className:"font-semibold",children:o.aircraft})]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Origin:"})," ",(0,r.jsx)("span",{className:"font-semibold",children:o.origin})]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Destination:"})," ",(0,r.jsx)("span",{className:"font-semibold",children:o.destination})]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Flight Type:"})," ",(0,r.jsx)("span",{className:"font-semibold",children:o.flightType})]})]}),(0,r.jsxs)(L.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.reload(),className:"w-full flex max-w-xs mx-auto items-center justify-center gap-3 bg-indigo-600 text-white py-4 rounded-lg font-bold text-xl hover:bg-indigo-700 transition-all duration-300 shadow-lg dark:bg-indigo-700 dark:hover:bg-indigo-600",children:[(0,r.jsx)(q.A,{className:"w-6 h-6"}),"Start New Flight"]})]})]});let ec=()=>{N(0),z(!1),ee(!1),V(!1),d(e=>({...e})),O.push("/")},eg=b[w];return(0,r.jsx)("div",{className:"min-h-screen text-gray-800 lg:py-12 lg:px-6 pb-40 dark:bg-zinc-900 bg-gradient-to-b from-indigo-50 to-white dark:from-zinc-900 dark:to-zinc-950",children:(0,r.jsxs)("div",{className:"container mx-auto max-w-4xl",children:[(0,r.jsx)("div",{className:"fixed top-6 right-6 z-99",children:(0,r.jsx)(eo,{})}),(0,r.jsx)("div",{className:"flex items-center justify-between px-4 py-4 md:pt-0",children:(0,r.jsx)("div",{className:"flex items-center ".concat(F&&"md:mx-auto"," "),children:F?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{onClick:ec,className:"md:hidden text-indigo-500 hover:text-indigo-700 dark:text-indigo-400 dark:hover:text-indigo-300 transition mr-2 p-2 rounded-full hover:bg-gray-100 dark:hover:bg-zinc-800","aria-label":"Back to start",children:(0,r.jsx)(K.A,{className:"w-6 h-6"})}),(0,r.jsx)("h1",{className:"text-3xl font-extrabold text-indigo-800 dark:text-white/90 pl-0 md:pl-4",children:"Flight Phraseology"})]}):(0,r.jsx)("h1",{className:"text-3xl font-extrabold text-indigo-800 dark:text-white/90 pl-4",children:"Flight Phraseology"})})}),F?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"px-6 text-center dark:text-white/90 ",children:[(0,r.jsxs)("h2",{className:"text-xl md:text-2xl font-light mb-4 flex flex-row md:flex-row items-center justify-center gap-2 text-center text-gray-700 dark:text-gray-300",children:[(0,r.jsx)("span",{className:"font-bold text-indigo-600 dark:text-indigo-400",children:o.aircraft}),o.origin&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(E.ewK,{className:"w-6 h-6 text-indigo-500 dark:text-indigo-400"}),(0,r.jsx)("span",{className:"font-bold text-indigo-600 dark:text-indigo-400",children:o.origin}),o.destination&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(E.Rvd,{className:"w-6 h-6 text-indigo-500 dark:text-indigo-400"}),(0,r.jsx)("span",{className:"font-bold text-indigo-600 dark:text-indigo-400",children:o.destination})]})]})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(null==(e=o.userFlags)?void 0:e.length)>0?(0,r.jsx)("div",{className:"flex flex-wrap justify-center gap-2 mt-2",children:o.userFlags.map(e=>{var t;return(0,r.jsx)("span",{className:"bg-indigo-100 text-indigo-700 rounded-full text-xs px-3 py-1 font-semibold cursor-pointer hover:bg-indigo-200 transition-colors   dark:bg-indigo-900 dark:text-indigo-300 dark:hover:bg-indigo-800",onClick:()=>h(!0),children:null!=(t=X[e])?t:e},e)})}):(0,r.jsx)("button",{className:"bg-indigo-100 text-indigo-700 rounded-full text-xs px-3 py-1 font-semibold cursor-pointer hover:bg-indigo-200 transition-colors   dark:bg-indigo-900 dark:text-indigo-300 dark:hover:bg-indigo-800",onClick:()=>h(!0),children:"Add Flags"}),m&&(0,r.jsx)(et,{onClose:()=>h(!1)})]}),(0,r.jsxs)("div",{className:"mb-6 px-4 md:px-0",children:[(0,r.jsx)("div",{className:"relative w-full h-3 bg-gray-200 rounded-full overflow-hidden dark:bg-zinc-700",children:(0,r.jsx)(L.P.div,{className:"absolute top-0 left-0 h-full bg-gradient-to-r from-blue-500 to-indigo-500 rounded-full shadow-lg",style:{width:"".concat(S,"%")},initial:{width:"0%"},animate:{width:"".concat(S,"%")},transition:{duration:.8,ease:"easeInOut"}})}),(0,r.jsxs)("div",{className:"text-center mt-2 text-sm font-medium text-gray-600 dark:text-gray-300",children:[Math.round(S),"% completed"]})]})]}),(0,r.jsx)(Z.N,{mode:"wait",children:(0,r.jsxs)(L.P.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},transition:{duration:.3},className:"mb-8",children:[(0,r.jsxs)("div",{className:"text-center mb-6",children:[(0,r.jsx)(v,{className:"text-3xl font-bold text-indigo-600 dark:text-indigo-400 px-4",children:null==eg?void 0:eg.name}),(0,r.jsx)(j,{className:"text-md font-light text-gray-600 dark:text-gray-400 mt-2 px-4",children:(null==eg?void 0:eg.description)||"Flight phase"})]}),(0,r.jsx)(M,{stage:eg})]},w)}),(0,r.jsx)("div",{className:"text-center mb-10 px-4",children:(0,r.jsxs)(L.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{T(!0),_(!0)},className:"inline-flex items-center gap-2 px-6 py-3 rounded-full bg-red-500 text-white font-semibold shadow-md hover:bg-red-600 transition-all duration-300   dark:bg-red-700 dark:hover:bg-red-600",children:[(0,r.jsx)(E.sUz,{className:"w-5 h-5"}),"End Flight Now"]})}),w>0&&(0,r.jsx)(L.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:el,className:"hidden md:flex fixed left-4 top-1/2 -translate-y-1/2 z-50 text-indigo-400 hover:text-indigo-600 transition-all duration-200 drop-shadow-xl","aria-label":"Previous phase",children:(0,r.jsx)(K.A,{className:"w-14 h-14"})}),(0,r.jsx)(L.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:en,className:"hidden md:flex fixed right-4 top-1/2 -translate-y-1/2 z-50 text-indigo-400 hover:text-indigo-600 transition-all duration-200 drop-shadow-xl","aria-label":"Next phase",children:(0,r.jsx)($.A,{className:"w-14 h-14"})}),(0,r.jsxs)("div",{className:"fixed bottom-4 left-0 right-0 flex justify-center items-center gap-4 px-4 md:hidden z-50",children:[w>0&&(0,r.jsx)(L.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:el,className:"flex items-center justify-center w-14 h-14 rounded-full bg-indigo-500 text-white shadow-lg hover:bg-indigo-600 transition-all duration-300","aria-label":"Previous phase",children:(0,r.jsx)(K.A,{className:"w-8 h-8"})}),w<b.length-1&&(0,r.jsx)(L.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:en,className:"flex items-center justify-center w-14 h-14 rounded-full bg-indigo-500 text-white shadow-lg hover:bg-indigo-600 transition-all duration-300","aria-label":"Next phase",children:(0,r.jsx)($.A,{className:"w-8 h-8"})})]})]}):(0,r.jsx)(L.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-8 p-4 md:p-0",children:(0,r.jsx)(J,{onSubmit:()=>{z(!0)}})}),F&&(0,r.jsxs)("div",{className:"mt-12 text-center px-4",children:[(0,r.jsx)("h4",{className:"text-xl font-semibold mb-6 text-gray-700 dark:text-white/90",children:"Jump to a phase:"}),(0,r.jsx)("div",{className:"grid grid-cols-2 gap-4 sm:grid-cols-3 lg:grid-cols-4",children:b.map((e,t)=>(0,r.jsx)(L.P.button,{whileHover:{scale:1.03},whileTap:{scale:.98},onClick:()=>es(t),className:f("px-4 py-3 rounded-lg text-sm font-medium transition-all duration-300 cursor-pointer","border border-indigo-300 shadow-md hover:shadow-lg",t===w?"bg-indigo-600 text-white shadow-xl dark:bg-indigo-700 dark:hover:bg-indigo-600":"bg-white text-indigo-700 hover:bg-indigo-50 dark:bg-zinc-800 dark:text-indigo-300 dark:hover:bg-zinc-700"),children:e.name},t))})]}),F&&(0,r.jsx)("div",{className:"text-right mt-12 px-4",children:(0,r.jsx)(D,{className:f("px-5 py-2 rounded-lg text-sm font-medium transition-all duration-300","bg-red-100 text-red-700 border border-red-300 shadow-md hover:shadow-lg hover:bg-red-200","dark:bg-red-900 dark:text-red-300 dark:border-red-700 dark:hover:bg-red-800")})}),F&&(0,r.jsxs)("div",{className:"flex fixed bottom-20 md:bottom-6 right-6 z-200 flex-col items-end gap-2",children:[o.originMetar&&(0,r.jsxs)(L.P.button,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.3},onClick:()=>V(e=>!e),className:f("bg-white/80 dark:bg-zinc-700/80 text-gray-700 dark:text-white border border-gray-200 dark:border-zinc-600 shadow-md transition px-4 py-3 rounded-full items-center gap-2 flex",B?"bg-indigo-600 text-white dark:bg-indigo-700":"hover:bg-gray-100 dark:hover:bg-zinc-600"),children:[(0,r.jsx)(ea.pBt,{className:f("w-5 h-5",B?"text-white dark:text-white":"text-indigo-500 dark:text-indigo-400")}),(0,r.jsx)("span",{className:"text-sm font-semibold",children:"METAR"})]}),o.simbriefOfp&&(0,r.jsxs)(L.P.button,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.3,delay:.2},onClick:()=>ee(e=>!e),className:f("bg-white/80 dark:bg-zinc-700/80 text-gray-700 dark:text-white border border-gray-200 dark:border-zinc-600 shadow-md transition px-4 py-3 rounded-full items-center gap-2 flex",G?"bg-indigo-600 text-white dark:bg-indigo-700":"hover:bg-gray-100 dark:hover:bg-zinc-600"),children:[(0,r.jsx)(Q.A,{className:f("w-5 h-5",G?"text-white dark:text-white":"text-indigo-500 dark:text-indigo-400")}),(0,r.jsx)("span",{className:"text-sm font-semibold",children:"OFP"})]}),(0,r.jsxs)(L.P.button,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.3,delay:.1},onClick:ec,className:"hidden md:flex bg-white dark:bg-zinc-700 text-gray-700 dark:text-white border border-gray-200 dark:border-zinc-600 hover:bg-gray-100 dark:hover:bg-zinc-600 shadow-md transition px-4 py-3 rounded-full items-center gap-2 flex",children:[(0,r.jsx)(E.zRt,{className:"w-6 h-6 text-indigo-500 dark:text-indigo-400"}),(0,r.jsx)("span",{className:"text-sm font-semibold",children:"Back to Start"})]})]}),(0,r.jsx)(Z.N,{children:B&&F&&(0,r.jsx)(L.P.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:50},transition:{duration:.3},className:"fixed bottom-0 md:bottom-30 md:right-[90px] w-full max-w-full lg:max-w-sm ",children:(0,r.jsx)(ei,{onRefresh:x,loading:g,error:u,originMetar:o.originMetar,destinationMetar:o.destinationMetar,departureIcao:o.origin,arrivalIcao:o.destination,onClose:()=>V(e=>!e)})})}),(0,r.jsx)(Z.N,{children:G&&F&&o.simbriefOfp&&(0,r.jsx)(L.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:"flex bottom-0 md:bottom-30 z-40 w-full max-w-full lg:max-w-4xl ",children:(0,r.jsx)(ed,{ofpText:(null==(t=o.simbriefOfp)?void 0:t.ofpText)||"",fullOfpHtml:(null==(a=o.simbriefOfp)?void 0:a.fullOfpHtml)||"",aircraftType:o.aircraft||null,departureIcao:String(o.origin||""),arrivalIcao:String(o.destination||""),loading:!1,error:null,onClose:()=>ee(!1)})})})]})})}},7536:(e,t,a)=>{var r={"./approach":[6082,82],"./approach.ts":[6082,82],"./arrival":[9647,647],"./arrival.ts":[9647,647],"./beforeTakeoff":[2051,51],"./beforeTakeoff.ts":[2051,51],"./clearance":[6284,284],"./clearance.ts":[6284,284],"./departure":[5002,2],"./departure.ts":[5002,2],"./enroute":[8306,306],"./enroute.ts":[8306,306],"./landing":[2053,53],"./landing.ts":[2053,53],"./pushback":[1633,633],"./pushback.ts":[1633,633],"./shutdown":[3460,460],"./shutdown.ts":[3460,460],"./startup":[5391,391],"./startup.ts":[5391,391],"./takeoff":[2550,550],"./takeoff.ts":[2550,550],"./taxi":[846,846],"./taxi.ts":[846,846],"./taxiToGate":[4532,532],"./taxiToGate.ts":[4532,532],"./unicom":[2989],"./unicom.ts":[2989]};function i(e){if(!a.o(r,e))return Promise.resolve().then(()=>{var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=r[e],i=t[0];return Promise.all(t.slice(1).map(a.e)).then(()=>a(i))}i.keys=()=>Object.keys(r),i.id=7536,e.exports=i}},e=>{var t=t=>e(e.s=t);e.O(0,[115,506,512,844,711,201,431,441,684,358],()=>t(4924)),_N_E=e.O()}]);